<!DOCTYPE html>
<html lang="en">
<head>
    <title>Haipei Node Chat</title>
    <meta charset="utf-8"/>
    <script src="jquery.js"></script>
    <script src="../svr/zTool.js"></script>
    <script src="../svr/chatLib.js"></script>
    <script src="DateUtil.js"></script>
    <script src="chat.js"></script>
    <link rel="stylesheet" href="main.css">

</head>
<body>
<!--//When the page is loaded, the client program first verifies that the browser supports Web Socket.-->
<!--// If not, the page shows the error Page-->
<div id='errorPage' class='page' style='display:none;'>
    <h1>
        WebSocket is not supported by this browser, please use chrome or Microsoft Edge or opera or firefox
    </h1>
</div>
<div id='prePage' class='page' style='width:690px;text-align:center;'>
    <label for='nickInput'></label>
    <input id='nickInput' style='width: 200px;' type='text' placeholder="Please enter your nickname"/>&nbsp;
    <input id='open' type='button' value='Enter the chat room'/>
</div>
<div id='mainPage' class='page' style='display:none;'>
    <div style='overflow:hidden;'>
        <div class='talkLeft'>
            <div id='talkFrame'></div>
            <div id='inputDiv'>
                <label for="message"></label>
                <textarea placeholder="Hey, just say something" id="message"></textarea>
            </div>
            <div style='overflow:hidden;'>
                <input type='button' style="float: left;" value='View history' id="history"/>
                <input type='button' style="float: right;" value='Send' id="send"/>
            </div>
        </div>
        <div class='talkRight'>
            <div id='onlineUsers'></div>
        </div>
        <div id="historyFrame">
        </div>
    </div>
</div>

</body>
<script type="text/javascript">
    $(function () {
        $("#history").click(function (event) {
            //取消冒泡事件
            event.stopPropagation();//这句是必须
            //若css已经给divTop定位则不需要再定位
            var offset = $(event.target).offset();
            $("#historyFrame").css({
                top: offset.top +
                    $(event.target).height + "px",
                left: offset.left
            });
            $("#historyFrame").slideToggle();
        });

        //点击空白或者其他区域时divTop隐藏
        $(document).click(function () {
            $("#historyFrame").slideUp('slow');
        });
        //点击divTop自身隐藏
        $("#historyFrame").click(function () {
            $(this.fadeOut(1000));
        })
    });
</script>
</html>
